<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Twitter Lead Automator</title>
    <!-- No CSP needed for web version -->
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; margin: 0; padding: 20px; background-color: #f4f7f9; color: #333; }
        .container { max-width: 760px; margin: auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { text-align: center; color: #1DA1F2; }
        p { text-align: center; line-height: 1.6; }
        .warning { background-color: #fffbe6; border: 1px solid #ffe58f; padding: 10px; border-radius: 4px; margin-bottom: 20px; text-align: center; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input[type="text"], input[type="password"], textarea { width: 95%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; font-size: 14px; }
        textarea { height: 80px; resize: vertical; }
        .buttons { text-align: center; margin-top: 20px; }
        button { padding: 10px 20px; font-size: 16px; border: none; border-radius: 5px; cursor: pointer; margin: 0 10px; }
        #startBtn { background-color: #1DA1F2; color: white; }
        #startBtn:disabled { background-color: #a0d3f2; cursor: not-allowed; }
        #stopBtn { background-color: #e0245e; color: white; }
        #stopBtn:disabled { background-color: #f0a0b9; cursor: not-allowed; }
        #logs { background-color: #2d3748; color: #e2e8f0; padding: 15px; border-radius: 5px; height: 200px; overflow-y: scroll; white-space: pre-wrap; font-family: 'Courier New', Courier, monospace; font-size: 12px; margin-top: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Twitter Lead Automator</h1>
        <p>This is a live demo of an automated lead generation bot. Click "Start Demo" to see it in action.
        <br>The bot will use a pre-configured demo account to search for a few leads on Twitter and simulate engagement.</p>
        
        <div class="warning">
            <strong>Note:</strong> This is a shared demo. Only one person can run it at a time. If it's busy, please try again in a few minutes. The demo will automatically stop after a short period.
        </div>

        <div class="buttons">
            <button id="startBtn">Start Demo</button>
            <button id="stopBtn" disabled>Stop Demo</button>
        </div>

        <div id="logs">Welcome! Enter your details and click "Start Bot".</div>
    </div>

    <script>
        const startBtn = document.getElementById('startBtn');
        const stopBtn = document.getElementById('stopBtn');
        const logsDiv = document.getElementById('logs');

        // Connect to WebSocket server
        const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';
        const ws = new WebSocket(`${protocol}//${window.location.host}`);

        ws.onopen = () => {
            console.log('Connected to server');
            logsDiv.innerHTML = '‚úÖ Connected to server. Ready to start.<br>';
        };

        ws.onmessage = (event) => {
            const data = JSON.parse(event.data);
            if (data.type === 'log') { 
                logsDiv.innerHTML += `${data.message}<br>`;
                logsDiv.scrollTop = logsDiv.scrollHeight; // Auto-scroll
            } else if (data.type === 'status') {
                if (data.status === 'busy') {
                    logsDiv.innerHTML += `‚ö†Ô∏è Server is busy with another demo. Please try again in a moment.<br>`;
                    startBtn.disabled = true;
                } else if (data.status === 'stopped') {
                    logsDiv.innerHTML += `‚úÖ Demo finished.<br>`;
                    startBtn.disabled = false;
                    stopBtn.disabled = true;
                }
            }
        };

        ws.onclose = () => {
            logsDiv.innerHTML += '‚ùå Disconnected from server. Please refresh the page.<br>';
            startBtn.disabled = true;
            stopBtn.disabled = true;
        };

        startBtn.addEventListener('click', () => {
            logsDiv.innerHTML = 'üöÄ Starting bot... Please wait.<br>';
            ws.send(JSON.stringify({ type: 'start-automation' })); // No config sent
            startBtn.disabled = true;
            stopBtn.disabled = false;
        });

        stopBtn.addEventListener('click', () => {
            logsDiv.innerHTML += 'üõë Stopping bot...<br>';
            ws.send(JSON.stringify({ type: 'stop-automation' }));
            startBtn.disabled = false;
            stopBtn.disabled = true;
        });
    </script>
</body>
</html>
